<!doctype html>

<script src="encoder.js"></script>
<script>
Module.onRuntimeInitialized = () => {
  console.log('libvpx ABI version', Module.version());
  const start = performance.now();
  const data = Module.encode();
  if(!data) {
    throw Error(Module.last_error_desc());
  }
  console.log(performance.now() - start);
  const blob = URL.createObjectURL(new Blob([data]));
  document.body.innerHTML = `<a href="${blob}" download="test.mkv">Download</a>`;
}
</script>
